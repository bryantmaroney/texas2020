class ModalToImage{constructor(t){this.count=t,this.baseUrl=`${window.location.origin}${window.location.pathname}`,this.imgContainer=document.getElementById("canvasImgContainer"),this.voteImages={"agree-dot":this.imgContainer&&this.imgContainer.children[0],"disagree-dot":this.imgContainer&&this.imgContainer.children[1],"skip-dot":this.imgContainer&&this.imgContainer.children[2]},this.background={hf:"#14254c",body:"#1a2e5a"},this.lines={left:{from:147.36,to:329.376},right:{from:395.328,to:578.016},sHeight:127.968,height:40,color:"#305387"},this.ints={left:{from:159.36},right:{from:408},sHeight:115.296,height:40,color:"#305387"},this.texts={left:{from:179.36,title:["End Gerrymandering","Vote By Mail","Reveal the Writers","Modernize Elections","Ranking Your Candidates"]},right:{from:430.968,title:["Ban the Barriers","Limit the Lobbyists","Rethink Registration","Clean Up Elections","Tune In Texas"]},sHeight:112.704,height:40,color:"#fff"},this.votes={left:[108,93.984],right:[359.328,93.984],height:39,wh:34},this.width=677.76,this.height=355.2}async createImage(){document.querySelector(".summary-modal-section").getBoundingClientRect();var t=document.createElement("canvas");return await this.loadFonts(),this.ctx=t.getContext("2d"),this.voteResult=JSON.parse(localStorage.voteResult||"[]"),t.width=this.width,t.height=this.height,this.createElement([0,0,this.width,70.048],this.background.hf),this.createElement([0,66.048,this.width,249.528],this.background.body),this.createElement([0,312.576,this.width,43.296],this.background.hf),this.createImg([18.048,7.296,639.84,73.344],"headerLogoNew.png"),this.createImg([24.672,301.344,225.984,41.376],"summary-footer-logo.png"),this.createLines(),this.createInts(),this.createText(),this.createVotes(),new Promise(e=>{e(t.toDataURL("image/png"))})}async loadFonts(){return await document.fonts.load('10pt "Gothic"'),await document.fonts.load('10pt "Lato"'),new Promise(t=>t(!0))}createElement(t,e){this.ctx.fillStyle=e,this.ctx.fillRect(...t)}createImg(t,e){let i=void 0!==e.src?void 0:`${this.baseUrl}assets/images/${e}`;i&&((e=document.createElement("img")).src=i),this.ctx.drawImage(e,...t)}createLines(){let t,e;for(let i=0;i<2*(this.count-1);i++)t=i<this.count-1?"left":"right",e=i<this.count-1?i:i-this.count+1,this.ctx.beginPath(),this.ctx.lineWidth=2,this.ctx.lineCap="butt",this.ctx.strokeStyle=this.lines.color,this.ctx.moveTo(this.lines[t].from,this.lines.sHeight+e*this.lines.height),this.ctx.lineTo(this.lines[t].to,this.lines.sHeight+e*this.lines.height),this.ctx.stroke()}createInts(){let t,e;for(let i=0;i<2*this.count;i++)t=i<this.count?"left":"right",e=i<this.count?i:i-this.count,this.ctx.font="900 25px Gothic",this.ctx.fillStyle=this.ints.color,this.ctx.fillText(i+1,this.ints[t].from-(i>8?5:0),this.ints.sHeight+e*this.ints.height)}createText(){let t,e;for(let i=0;i<2*this.count;i++)t=i<this.count?"left":"right",e=i<this.count?i:i-this.count,this.ctx.font="500 15px Lato",this.ctx.fillStyle=this.texts.color,this.ctx.fillText(this.texts[t].title[e],this.texts[t].from,this.texts.sHeight+e*this.texts.height)}createVotes(){let t,e,i,s;this.voteResult.forEach((h,o)=>{t=o<5?"left":"right",s=o<5?o:o-5,e=[this.votes[t][0],this.votes[t][1]+s*this.votes.height,this.votes.wh,this.votes.wh],i=this.voteImages[Object.values(h)[0]],this.createImg(e,i)})}}